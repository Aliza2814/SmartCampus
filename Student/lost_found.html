<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lost & Found - SmartCampus</title>
  <link rel="stylesheet" href="lost_found.css">
</head>

<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo"><img src="../img1.png"></div>
        <div>SmartCampus</div>
      </div>
      <nav class="nav">
        <a href="../teacher.html">üè† Dashboard</a>
        <a href="myvault.html">üìÇ MyVault</a>
        <a href="comps_tch.html">üì¢ Complaints</a>
        <a href="lost_found.html" class="active">üîé Lost & Found</a>
        <a href="teacher-attendance.html">üìÖ Attendance</a>
        <a href="to_do_list.html">üìù To-Do</a>
        <a href="../teacher.html#calendarSection">üóìÔ∏è Calendar</a>
      </nav>
      <div class="tools">
        <!-- <button class="tool-btn" id="toggleTheme"> Toggle Dark</button>
        <button class="tool-btn" id="openDrawer"> Notifications</button> -->
      </div>
    </aside>

    <main>
      <header class="topbar">
        <div class="topbar-inner">
          <div class="search" style="min-width:260px;">
            üîé <input id="search" placeholder="Search features, files, events... " />
          </div>
          <!-- <div class="clock" id="clock">16:55</div> -->
          <div class="user-profile">AS</div>
        </div>
      </header>

      <div class="container">
        <div class="title-section">
          <h2>Lost & Found</h2>
          <h3>Community Noticeboard</h3>
          <p>Help fellow students by reporting lost or found items on campus.</p>
        </div>

        <div class="btn-group">
          <a href="#lostModal" class="btn btn-lost"> Report a Lost Item</a>
          <a href="#foundModal" class="btn btn-found"> Report a Found Item</a>
        </div>

        <div class="filter-bar">
          <button class="filter-btn active">All Items</button>
          <button class="filter-btn">Lost</button>
          <button class="filter-btn">Found</button>
        </div>

        <div class="card-grid">
          <div class="card">
            <div class="card-header">
              <h3>Student ID Card</h3>
              <span class="tag tag-found">Found</span>
            </div>
            <p>Found a student ID card for 'Ayushi Sharma' on the floor of the cafeteria. Left it with the cashier at
              the
              main counter.</p>
            <div class="card-meta">
              <div class="meta-item"><span></span><strong>Found At:</strong> Cafeteria</div>
              <div class="meta-item"><span></span><strong>Date:</strong> September 4, 2025</div>
            </div>
            <div class="card-footer">
              <a href="#">View Details ‚Üí</a>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>iPhone 13 (White)</h3>
              <span class="tag tag-found">Found</span>
            </div>
            <p>Found an iPhone with a clear case on a bench in the central quad. The screen is on, but it's locked.
              Currently holding onto it.</p>
            <div class="card-meta">
              <div class="meta-item"><span></span><strong>Found At:</strong> Central Quad Bench</div>
              <div class="meta-item"><span></span><strong>Date:</strong> September 3, 2025</div>
            </div>
            <div class="card-footer">
              <a href="#">Claim Item ‚Üí</a>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Blue Backpack</h3>
              <span class="tag tag-lost">Lost</span>
            </div>
            <p>A standard Jansport backpack, last seen near the main library. It contains a laptop, charger, and
              important
              class notes for Physics 101.</p>
            <div class="card-meta">
              <div class="meta-item"><span></span><strong>Last Seen:</strong> Near Library Entrance</div>
              <div class="meta-item"><span></span><strong>Date:</strong> September 2, 2025</div>
            </div>
            <div class="card-footer">
              <a href="#">Contact Owner ‚Üí</a>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Silver Water Bottle</h3>
              <span class="tag tag-lost">Lost</span>
            </div>
            <p>Missing a silver Hydro Flask water bottle. It has a few stickers on it, including one of a mountain
              range.
              Probably left it in Room 301 or 302.</p>
            <div class="card-meta">
              <div class="meta-item"><span></span><strong>Last Seen:</strong> Room 301, Engineering Block</div>
              <div class="meta-item"><span></span><strong>Date:</strong> September 1, 2025</div>
            </div>
            <div class="card-footer">
              <a href="#">Contact Owner ‚Üí</a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" id="lostModal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Report a Lost Item</h2>
            <a href="#" class="close">&times;</a>
          </div>
          <div class="modal-body">
            <div class="form-field">
              <label for="lost-item-name">Item Name</label>
              <input type="text" id="lost-item-name" placeholder="e.g., Black leather wallet">
            </div>
            <div class="form-field">
              <label for="lost-desc">Description</label>
              <textarea id="lost-desc" rows="3" placeholder="Any specific details, brands, or contents..."></textarea>
            </div>
            <div class="form-field">
              <label for="lost-loc">Last Seen Location</label>
              <input type="text" id="lost-loc" placeholder="e.g., Second floor of the library">
            </div>
            <div class="form-field">
              <label for="lost-contact">Your Contact Email</label>
              <input type="email" id="lost-contact" placeholder="Your email address">
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn btn-submit">Submit Lost Report</a>
          </div>
        </div>
      </div>

      <div class="modal" id="foundModal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Report a Found Item</h2>
            <a href="#" class="close">&times;</a>
          </div>
          <div class="modal-body">
            <div class="form-field">
              <label for="found-item-name">Item Name</label>
              <input type="text" id="found-item-name" placeholder="e.g., iPhone 13">
            </div>
            <div class="form-field">
              <label for="found-desc">Description</label>
              <textarea id="found-desc" rows="3" placeholder="Color, condition, any identifying marks..."></textarea>
            </div>
            <div class="form-field">
              <label for="found-loc">Location Found</label>
              <input type="text" id="found-loc" placeholder="e.g., On a table in the cafeteria">
            </div>
            <div class="form-field">
              <label for="found-contact">Your Contact Email (Optional)</label>
              <input type="email" id="found-contact" placeholder="Your email, if you want to be contacted">
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn btn-submit">Submit Found Report</a>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
document.addEventListener("DOMContentLoaded", () => {
  const lostModal = document.getElementById("lostModal");
  const foundModal = document.getElementById("foundModal");
  const closeButtons = document.querySelectorAll(".close");
  const lostSubmitBtn = lostModal.querySelector(".btn-submit");
  const foundSubmitBtn = foundModal.querySelector(".btn-submit");
  const cardGrid = document.querySelector(".card-grid");
  const filterBtns = document.querySelectorAll(".filter-btn");

  // Load existing data
  let items = JSON.parse(localStorage.getItem("lostFoundItems")) || [];
  renderItems();

  // =======================
  // üîπ MODAL FUNCTIONALITY
  // =======================
  document.querySelectorAll('a[href="#lostModal"]').forEach(btn => {
    btn.addEventListener("click", () => openModal(lostModal));
  });

  document.querySelectorAll('a[href="#foundModal"]').forEach(btn => {
    btn.addEventListener("click", () => openModal(foundModal));
  });

  closeButtons.forEach(btn => {
    btn.addEventListener("click", closeModals);
  });

  window.addEventListener("click", (e) => {
    if (e.target.classList.contains("modal")) closeModals();
  });

  function openModal(modal) {
    modal.style.display = "flex";
  }

  function closeModals() {
    document.querySelectorAll(".modal").forEach(m => m.style.display = "none");
  }

  // =======================
  // üîπ ADD LOST ITEM
  // =======================
  lostSubmitBtn.addEventListener("click", (e) => {
    e.preventDefault();
    const name = document.getElementById("lost-item-name").value.trim();
    const desc = document.getElementById("lost-desc").value.trim();
    const loc = document.getElementById("lost-loc").value.trim();
    const contact = document.getElementById("lost-contact").value.trim();

    if (!name || !desc || !loc) return alert("Please fill in all required fields!");

    const newItem = {
      id: Date.now(),
      type: "lost",
      name,
      desc,
      loc,
      contact,
      date: new Date().toLocaleDateString()
    };

    items.push(newItem);
    saveItems();
    renderItems();
    closeModals();
    lostModal.querySelectorAll("input, textarea").forEach(i => i.value = "");
  });

  // =======================
  // üîπ ADD FOUND ITEM
  // =======================
  foundSubmitBtn.addEventListener("click", (e) => {
    e.preventDefault();
    const name = document.getElementById("found-item-name").value.trim();
    const desc = document.getElementById("found-desc").value.trim();
    const loc = document.getElementById("found-loc").value.trim();
    const contact = document.getElementById("found-contact").value.trim();

    if (!name || !desc || !loc) return alert("Please fill in all required fields!");

    const newItem = {
      id: Date.now(),
      type: "found",
      name,
      desc,
      loc,
      contact,
      date: new Date().toLocaleDateString()
    };

    items.push(newItem);
    saveItems();
    renderItems();
    closeModals();
    foundModal.querySelectorAll("input, textarea").forEach(i => i.value = "");
  });

  // =======================
  // üîπ RENDER ITEMS
  // =======================
  function renderItems(filter = "all") {
    cardGrid.innerHTML = "";
    const filteredItems = items.filter(item => 
      filter === "all" ? true : item.type === filter
    );

    if (filteredItems.length === 0) {
      cardGrid.innerHTML = `<p style="text-align:center;opacity:0.7;">No items to display.</p>`;
      return;
    }

    filteredItems.forEach(item => {
      const card = document.createElement("div");
      card.classList.add("card");
      card.innerHTML = `
        <div class="card-header">
          <h3>${item.name}</h3>
          <span class="tag tag-${item.type}">${capitalize(item.type)}</span>
        </div>
        <p>${item.desc}</p>
        <div class="card-meta">
          <div class="meta-item"><strong>${item.type === "lost" ? "Last Seen:" : "Found At:"}</strong> ${item.loc}</div>
          <div class="meta-item"><strong>Date:</strong> ${item.date}</div>
        </div>
        <div class="card-footer">
          ${item.contact ? `<a href="mailto:${item.contact}">${item.type === "lost" ? "Contact Owner ‚Üí" : "Contact Finder ‚Üí"}</a>` : `<a href="#">View Details ‚Üí</a>`}
        </div>
      `;
      cardGrid.prepend(card);
    });
  }

  // =======================
  // üîπ FILTER FUNCTIONALITY
  // =======================
  filterBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      filterBtns.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const filterType = btn.textContent.toLowerCase().includes("lost")
        ? "lost"
        : btn.textContent.toLowerCase().includes("found")
        ? "found"
        : "all";
      renderItems(filterType);
    });
  });

  function saveItems() {
    localStorage.setItem("lostFoundItems", JSON.stringify(items));
  }

  function capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }
});
</script>

</body>

</html>